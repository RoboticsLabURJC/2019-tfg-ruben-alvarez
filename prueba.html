<!DOCTYPE html>
<html lang="en">

<head>
    <title>WebSim - Rubén Álvarez Martín</title>
    <meta charset="utf-8" />
    <!-- Physics for A-Frame VR -->
    <link rel="stylesheet" type="text/css" href="css/main.css"></link>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- <script ></script> -->
    <link href="css/teleoperator.css" rel="stylesheet">
    <script src="../simcore/interfacesRobot.js"></script>
    <script src="js/ace-editor/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="build/websim.bundle.js"></script>
</head>

<body>
    <nav id="navbar">
        <a href="/index.html"><img src="../assets/resources/jderobot.svg" style="width:70px; height:70px; margin-top: 6px;" /></a>
        <div id="nav-button-container">
            <button onclick id="cambtn"><img src="../assets/resources/play-camera-icon.png" /></button>
        </div>
    </nav>
    <div id="container">
        <div id="myIFrame">
            <a-scene id="scene" background="color: gray;" stats embedded physics="debug: true" inspector="url: https://aframe.io/releases/0.4.0/aframe-inspector.min.js">
                <a-assets>
                    <a-asset-item id="model-pibot" src="../assets/models/jrobotFgltf.gltf"></a-asset-item>
                    <img id="ground" src="../assets/textures/interlagos.png" />
                    <img id="sky" src="../assets/textures/sky.png" />
                </a-assets>
                <!-- Pibot, which body is the asset item with ID = model-pibot -->
                <a-entity dynamic-body="mass: 1;" id="a-pibot" gltf-model="#model-pibot" scale="0.5 0.5 0.5" rotation="0 160 0" position="12 10 25">
                    <a-entity id="secondaryCamera" position="0 0 0" rotation="-20 -90 0">
                        <!-- Create a second third-person camera which cant be controlled, the Pibot camera -->
                        <a-camera position="0 0.03 -0.01" spectator="canvas:#spectatorDiv;" active="false" wasd-controls-enabled="false" look-controls-enabled="false"></a-camera>
                    </a-entity>
                </a-entity>
                <a-entity id="positionSensor"></a-entity>
                <!--<a-box class="collidable" dynamic-body="mass:1000;" scale="1 1 8" position="7.87 0.7 -0.16" rotation="0 0 0" color="#0000ff"></a-box>-->
                <!--<a-box class="collidable" dynamic-body="mass:1000;" scale="1 1 8" position="2.75 0.7 3.27" rotation="0 89 0" color="#0000ff"></a-box>-->
                <!--<a-box class="collidable" dynamic-body="mass:1000;" scale="1 1 8" position="2.83 0.7 -3.93" rotation="0 89 0" color="#0000ff"></a-box>-->
                <!--<a-box class="collidable" dynamic-body="mass:1000;" scale="1 1 8" position="-2.0 0.7 -0.16" rotation="0 0 0" color="#0000ff"></a-box>-->
                <!-- Scenario -->
                <!--<a-sphere id="mySphere" class="collidable" dynamic-body="mass:10000;" scale="1 1 1" position="2.75 0.01 -2.27" rotation="0 90 0" color="#00ff00"></a-sphere>-->
                <a-plane static-body position="0 0 0" rotation="-90 0 0" width="100" height="100" repeat="1 1" src="#ground">
                </a-plane>

                <!-- Illumination -->
                <a-light type="ambient" color="white"></a-light>
                <!--<a-light type="point" intensity="1" position="-2 2 4"></a-light>-->

                <a-entity movement-controls="fly:true" position="0 0 0">
                    <a-entity id="primaryCamera" position="14 10 35" camera look-controls wasd-controls scale="10 10 10"></a-entity>
                </a-entity>
            </a-scene>
            <script type="text/javascript" src="js/opencv3.3.1.js"></script>
        </div>
        <div id="right-container">
            <div class="buttons">
                <div id="takeoff">
                    <button class="buttonHeight">Aumentar altura</button>
                    <br>
                    <button class="buttonHeight">Reducir altura</button>
                </div>
                <div id="upArrow">
                    <input id="invisible" class="arrows" type="image" src="img/flechaArriba.png" />
                    <input id="speed" class="arrows" type="image" src="img/flechaArriba.png" />
                </div>
                <div id="bottomArrows">
                    <input class="arrows" type="image" src="img/flechaIzquierda.png" onClick="" />
                    <input class="arrows" type="image" src="img/flechaabajo.png" onClick="" />
                    <input class="arrows" type="image" src="img/flechaderecha.png" onClick="" />
                </div>
                <div class="takeland">
                    <button id="takeOff" class="buttonTakeOff"><span>Despegar</span></button>
                    <button id="land" class="buttonLand"><span>Aterrizar</span></button>
                </div>
            </div>
        </div>
        <div id="cameras" style="display:inline-flex;">
            <div id="cameraOpenCV" style="margin-left: 5px;">
                <p>OpenCV image</p>
                <canvas id="outputCanvas"></canvas>
            </div>
            <div id="robotCam">
                <p>Robot Camera</p>
                <div id="spectatorDiv" style="width: 150px; height: 100px;"></div>
            </div>
        </div>
    </div>
    <script>
    $(document).ready(function() {
      $("#speed").click(function() {
        console.log("velocidad");
        let velocity = myRobot.getV();
        console.log("velocidad actual:" + velocity);
        setV(velocity+0.1);
      });
    });
  	// document.getElementById("takeOff").addEventListener("click", takeOff);
  	// document.getElementById("land").addEventListener("click", land);
  	// document.getElementById("speed").addEventListener("click", speed);
    // var myRobot = new RobotI('a-pibot');
    // console.log("iniciado robot");
    //
  	// 	function takeOff() {
  	// 		console.log("Taking off");
  	// 		despegar();
  	// 	}
  	// 	function land(){
  	// 		aterrizar();
  	// 	}
  	// 	function speed(){
  	// 		let velocity = myRobot.getV();
    //     console.log("velocidad actual:" + velocity);
  	// 		setV(velocity+0.1);
  	// 	}
  	</script>
</body>

</html>
